<!DOCTYPE html>
<head>
  <meta charset="utf-8" />
  <title> Final </title>
  <style>
    body, html {
      margin: 0;
      padding: 0;
      overflow: hidden;
      width: 100%;
      height: 100%;
    }
    canvas {
      display: block;
      width: 100vw;
      height: 100vh;
    }
  </style>
</head>
<body>
    <!-- core three.js -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/build/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/OBJLoader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/dat.gui/build/dat.gui.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/RGBELoader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/MTLLoader.js"></script>

    <script>
const renderer = new THREE.WebGLRenderer();
renderer.setSize(window.innerWidth, window.innerHeight);
renderer.shadowMap.enabled = true;
renderer.shadowMap.type = THREE.PCFSoftShadowMap;
document.body.appendChild(renderer.domElement);

const scene = new THREE.Scene();

// Camera
const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
camera.position.set(10, 1, 2);
camera.lookAt(0, 1, 0);
const controls = new THREE.OrbitControls(camera, renderer.domElement);

// Floor
const planeGeometry = new THREE.PlaneGeometry(20, 20);
const planeMaterial = new THREE.MeshStandardMaterial({ color: 0x808080 });
const plane = new THREE.Mesh(planeGeometry, planeMaterial);
plane.rotation.x = -Math.PI / 2;
plane.position.y = 0;
plane.receiveShadow = true;
scene.add(plane);


const loader = new THREE.OBJLoader();
        loader.load('https://raw.githubusercontent.com/Pongpanot99/final.github.io/main/colot.obj', function (object) {
            object.castShadow = true; // ✅ วัตถุนี้สร้างเงา
            // ตั้งค่า castShadow กับทุก mesh ใน object
            object.traverse(function (child) {
                if (child.isMesh) {
                    child.castShadow = true;
                    child.receiveShadow = true;
                    child.material = new THREE.MeshStandardMaterial({
                        color: 0xffffff
                    });
                }
            });
            object.scale.set(0.2, 0.2, 0.2);
            scene.add(object);
        }, undefined, function (error) {
            console.error('Error loading OBJ:', error);
        });




// Lights
const directionalLight = new THREE.DirectionalLight(0xffeedd, 0.9);
directionalLight.position.set(10, 5, 10);
directionalLight.castShadow = true;
scene.add(directionalLight);

// HDRI
const pmremGenerator = new THREE.PMREMGenerator(renderer);
pmremGenerator.compileEquirectangularShader();

new THREE.RGBELoader()
  .setDataType(THREE.UnsignedByteType)
  .load(
    'https://raw.githubusercontent.com/Pongpanot99/final.github.io/main/puresky_2k.hdr',
    (hdrTexture) => {
      const envMap = pmremGenerator.fromEquirectangular(hdrTexture).texture;
      scene.background = envMap;
      scene.environment = envMap;
      hdrTexture.dispose();
      pmremGenerator.dispose();
    }
  );

function animate() {
  
  renderer.render(scene, camera);
  requestAnimationFrame(animate);
}
animate();
</script>
</body>
</html>
